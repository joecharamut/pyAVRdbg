import debugger
import logging
import time

dbg = debugger.Debugger("atmega4809")
dbg.stop()
#logging.info(dbg.readRegs())
#logging.info(dbg.readSRAM(0x00, 1024))
#logging.info(dbg.readSREG())
#logging.info(dbg.readStackPointer())
dbg.pollEvent()
dbg.pollEvent()
dbg.breakpointSWSet(0x154)
dbg.pollEvent()
dbg.pollEvent()
time.sleep(1)
dbg.pollEvent()
dbg.pollEvent()
dbg.run()
dbg.pollEvent()
print(dbg.readProgramCounter())
print("\n")
dbg.step()
dbg.step()
dbg.step()
dbg.pollEvent()
dbg.pollEvent()
dbg.pollEvent()
dbg.pollEvent()
time.sleep(1)
dbg.pollEvent()
dbg.pollEvent()
dbg.run()
dbg.pollEvent()

time.sleep(1)

print(dbg.readProgramCounter())
print(dbg.readProgramCounter())
print("\n")
dbg.run()
dbg.pollEvent()
dbg.pollEvent()
dbg.pollEvent()
dbg.pollEvent()
#logging.info(dbg.readRegs())

dbg.cleanup()